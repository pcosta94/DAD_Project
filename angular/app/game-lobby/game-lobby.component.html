<div class="container">
	<div class="row">
		<div class="col-md-6">
			<h2>Pending Games List</h2>
			<button class="btn btn-primary btn-block" type="button" (click)="createNewGame()">Create New Game</button>
			<table class="table table-striped">
				<thead>
					<tr>
						<th>#</th>
						<th>Creator Username</th>
						<th>Team 1</th>
						<th>Team 2</th>
						<th>Joined Players</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let game of pendingGames; let i = index">
						<td>{{i+1}}</td>
						<td>{{game.creatorUsername}}</td>
						<td *ngIf="game.players.length<1"></td>
						<td *ngIf="game.players.length==1">{{game.players[0].username}}</td>
						<td *ngIf="game.players.length==2 || game.players.length>2">{{game.players[0].username}} and {{game.players[1].username}} </td>
						<td *ngIf="game.players.length<3"></td>
						<td *ngIf="game.players.length==3">{{game.players[2].username}}</td>
						<td *ngIf="game.players.length==4">{{game.players[2].username}} and {{game.players[3].username}}</td>
						<td>{{game.players.length}}/4</td>
						<td *ngIf="!isPlayerJoinned(i)">
							<button class="btn btn-success btn-block" type="button" *ngIf="game.creatorId != authService.currentUser._id"  (click)="joinPendingGame(i)">Join Game</button>
						</td>
						<td *ngIf="isPlayerJoinned(i)">
							<button class="btn btn-warning btn-block" type="button" *ngIf="game.creatorId != authService.currentUser._id"  >Exit Game</button>
							<button class="btn btn-danger btn-block" *ngIf="game.creatorId == authService.currentUser._id" (click)="deletePendingGame(game._id)">Delete Game</button>
							<button class="btn btn-success btn-block" *ngIf="game.creatorId == authService.currentUser._id && game.players.length == 4" (click)="startPendingGame()">Start Game</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="col-md-6">
			<h2>Playing Games List</h2>
			<table class="table table-striped">
				<thead>
					<tr>
						<th>#</th>
						<th>Creator Username</th>
						<th>Team 1</th>
						<th>Team 2</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let game of playingGames; let i = index">
						<td>{{i+1}}</td>
						<td>{{game.creatorUsername}}</td>
						<td>{{game.players[0].username}} and {{game.players[1].username}} </td>
						<td>{{game.players[2].username}} and {{game.players[3].username}}</td>
						<td>
							<button class="btn btn-success btn-block" type="button" [routerLink]="['/game', game._id]">Go To Game</button>
							<button class="btn btn-danger btn-block" *ngIf="game.creatorId == authService.currentUser._id" (click)="deletePendingGame(game._id)">Delete Game</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<div class="panel panel-primary">
				<div class="panel-heading">Gobal Chat</div>
				<div class="panel-body">
				    <notification-panel></notification-panel>
					<lobby-chat></lobby-chat>
				</div>
			</div>
		</div>
	</div>
</div>